<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1200 900">
  <!-- Styles -->
  <defs>
    <style>
      .heading { font-family: Arial; font-size: 22px; font-weight: bold; fill: #333; }
      .subheading { font-family: Arial; font-size: 18px; font-weight: bold; fill: #555; }
      .label { font-family: Arial; font-size: 14px; fill: #444; }
      .small-label { font-family: Arial; font-size: 12px; fill: #666; }
      .connection { stroke: #888; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .dashed-connection { stroke: #888; stroke-width: 2; fill: none; stroke-dasharray: 5,5; marker-end: url(#arrowhead); }
      .module { stroke: #2c3e50; stroke-width: 2; fill: #ecf0f1; rx: 10; ry: 10; }
      .submodule { stroke: #3498db; stroke-width: 2; fill: #eaf2f8; rx: 8; ry: 8; }
      .process { stroke: #27ae60; stroke-width: 2; fill: #e9f7ef; rx: 8; ry: 8; }
      .data { stroke: #e67e22; stroke-width: 2; fill: #fdf2e9; rx: 8; ry: 8; }
      .special { stroke: #8e44ad; stroke-width: 2; fill: #f5eef8; rx: 8; ry: 8; }
    </style>
    
    <!-- Arrow marker definition -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#888" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="600" y="40" text-anchor="middle" class="heading">Canggu Blockchain Architecture</text>

  <!-- 1. Quantum-Resistant Cryptography Module -->
  <rect x="100" y="80" width="240" height="180" class="module" />
  <text x="220" y="110" text-anchor="middle" class="subheading">Quantum-Resistant Cryptography</text>
  
  <rect x="120" y="130" width="200" height="30" class="submodule" />
  <text x="220" y="150" text-anchor="middle" class="label">CRYSTALS-Kyber Key Generation</text>
  
  <rect x="120" y="170" width="200" height="30" class="process" />
  <text x="220" y="190" text-anchor="middle" class="label">XMSS Transaction Hashing</text>
  
  <rect x="120" y="210" width="200" height="30" class="process" />
  <text x="220" y="230" text-anchor="middle" class="label">CRYSTALS-Dilithium Signatures</text>

  <!-- 2. DAG-Based Mempool Module -->
  <rect x="100" y="320" width="240" height="180" class="module" />
  <text x="220" y="350" text-anchor="middle" class="subheading">DAG-Based Mempool</text>
  
  <rect x="120" y="370" width="200" height="30" class="data" />
  <text x="220" y="390" text-anchor="middle" class="label">Transaction Graph Storage</text>
  
  <rect x="120" y="410" width="200" height="30" class="process" />
  <text x="220" y="430" text-anchor="middle" class="label">Kahn's Topological Sorting</text>
  
  <rect x="120" y="450" width="200" height="30" class="process" />
  <text x="220" y="470" text-anchor="middle" class="label">MEV-Resistant Validation</text>

  <!-- 3. ZK-SNARK Processing Module -->
  <rect x="480" y="120" width="240" height="220" class="module" />
  <text x="600" y="150" text-anchor="middle" class="subheading">ZK-SNARK Processing</text>
  
  <rect x="500" y="170" width="200" height="30" class="submodule" />
  <text x="600" y="190" text-anchor="middle" class="label">One-Time Trusted Setup</text>
  
  <rect x="500" y="210" width="200" height="30" class="process" />
  <text x="600" y="230" text-anchor="middle" class="label">GPU Proof Generation</text>
  
  <rect x="500" y="250" width="200" height="30" class="process" />
  <text x="600" y="270" text-anchor="middle" class="label">FPGA Proof Acceleration</text>
  
  <rect x="500" y="290" width="200" height="30" class="process" />
  <text x="600" y="310" text-anchor="middle" class="label">O(1) Proof Verification</text>

  <!-- 4. Parallel Smart Contract Module -->
  <rect x="480" y="380" width="240" height="180" class="module" />
  <text x="600" y="410" text-anchor="middle" class="subheading">Parallel Smart Contracts</text>
  
  <rect x="500" y="430" width="200" height="30" class="submodule" />
  <text x="600" y="450" text-anchor="middle" class="label">Dual-Path Contract Structure</text>
  
  <rect x="500" y="470" width="95" height="30" class="process" />
  <text x="547" y="490" text-anchor="middle" class="small-label">CPU Path (rBPF)</text>
  
  <rect x="605" y="470" width="95" height="30" class="process" />
  <text x="652" y="490" text-anchor="middle" class="small-label">GPU Path (CUDA)</text>
  
  <rect x="500" y="510" width="200" height="30" class="data" />
  <text x="600" y="530" text-anchor="middle" class="label">Hybrid State Storage</text>

  <!-- 5. Blockchain Core -->
  <rect x="860" y="200" width="240" height="220" class="module" />
  <text x="980" y="230" text-anchor="middle" class="subheading">Blockchain Core</text>
  
  <rect x="880" y="250" width="200" height="30" class="submodule" />
  <text x="980" y="270" text-anchor="middle" class="label">Tower BFT Consensus</text>
  
  <rect x="880" y="290" width="200" height="30" class="process" />
  <text x="980" y="310" text-anchor="middle" class="label">Block Generation & Validation</text>
  
  <rect x="880" y="330" width="200" height="30" class="data" />
  <text x="980" y="350" text-anchor="middle" class="label">Blockchain State</text>
  
  <rect x="880" y="370" width="200" height="30" class="special" />
  <text x="980" y="390" text-anchor="middle" class="label">50,000+ TPS Throughput</text>

  <!-- Transaction Flow - Input Stage -->
  <rect x="100" y="590" width="240" height="80" class="module" />
  <text x="220" y="620" text-anchor="middle" class="subheading">Transaction Input Stage</text>
  <rect x="120" y="630" width="200" height="30" class="process" />
  <text x="220" y="650" text-anchor="middle" class="label">New Transaction Reception</text>

  <!-- Transaction Flow - Processing Stage -->
  <rect x="480" y="590" width="240" height="130" class="module" />
  <text x="600" y="620" text-anchor="middle" class="subheading">Transaction Processing</text>
  <rect x="500" y="630" width="200" height="30" class="process" />
  <text x="600" y="650" text-anchor="middle" class="label">DAG Organization</text>
  <rect x="500" y="670" width="200" height="30" class="process" />
  <text x="600" y="690" text-anchor="middle" class="label">Batch Formation</text>

  <!-- Transaction Flow - Output Stage -->
  <rect x="860" y="590" width="240" height="130" class="module" />
  <text x="980" y="620" text-anchor="middle" class="subheading">Finalization Stage</text>
  <rect x="880" y="630" width="200" height="30" class="process" />
  <text x="980" y="650" text-anchor="middle" class="label">Proof Generation & Verification</text>
  <rect x="880" y="670" width="200" height="30" class="process" />
  <text x="980" y="690" text-anchor="middle" class="label">Block Commitment</text>

  <!-- Connections Between Modules -->
  <!-- Quantum Crypto to DAG Mempool -->
  <path d="M 220 260 L 220 320" class="connection" />
  
  <!-- DAG Mempool to ZK-SNARK -->
  <path d="M 340 400 L 480 230" class="connection" />
  
  <!-- ZK-SNARK to Blockchain Core -->
  <path d="M 720 230 L 860 270" class="connection" />

  <!-- Parallel Smart Contracts to Blockchain Core -->
  <path d="M 720 470 L 860 330" class="connection" />
  
  <!-- Transaction Flow Connections -->
  <path d="M 340 630 L 480 630" class="connection" />
  <path d="M 720 650 L 860 650" class="connection" />

  <!-- Cross Connections -->
  <!-- Quantum Crypto to Blockchain Core -->
  <path d="M 340 170 C 500 170, 700 250, 860 250" class="dashed-connection" />
  
  <!-- DAG Mempool to Parallel Smart Contracts -->
  <path d="M 340 450 L 480 470" class="dashed-connection" />
  
  <!-- ZK-SNARK to Parallel Smart Contracts -->
  <path d="M 600 340 L 600 380" class="connection" />
  
  <!-- Blockchain Core to Transaction Flow -->
  <path d="M 980 420 L 980 590" class="dashed-connection" />

  <!-- Feedback Loops -->
  <path d="M 880 350 C 800 350, 780 500, 780 650 C 780 720, 840 750, 860 690" class="dashed-connection" />

  <!-- Labels for Major Data Flows -->
  <text x="350" y="240" text-anchor="middle" class="small-label">Signed Transactions</text>
  <text x="410" y="380" text-anchor="middle" class="small-label">Ordered Transactions</text>
  <text x="790" y="250" text-anchor="middle" class="small-label">Transaction Proofs</text>
  <text x="790" y="470" text-anchor="middle" class="small-label">Contract Execution</text>
  <text x="410" y="610" text-anchor="middle" class="small-label">Raw Transactions</text>
  <text x="790" y="630" text-anchor="middle" class="small-label">Transaction Batches</text>
  <text x="840" y="740" text-anchor="middle" class="small-label">State Updates</text>
</svg>
